<!DOCTYPE HTML>
<HTML><HEAD>
         <TITLE>Show Image Example</TITLE>		 

<SCRIPT src="" type="text/javascript"></SCRIPT>

<script type="text/javascript" src="https://ssbi.lfuat.net/javascripts/api/tableau-2.2.1.min.js"></script>	
<!--
<script type="text/javascript" src="https://ssbi.lfuat.net/javascripts/api/tableau-2.2.1.min.js">
<script type="text/javascript" src="http://localhost/javascripts/api/tableau-2.2.1.min.js"></script>
-->
	
	
<SCRIPT type="text/javascript">
            var viz, sheet, table;

            function initViz() {
		var containerDiv = document.getElementById("vizContainer"),
                    //url = "http://localhost/views/abc/Sheet1",
		    url = "https://ssbi.lfuat.net/views/testing20180305/abc",
		    //http://localhost/views/abc/Sheet1?iframeSizedToWindow=true&:embed=y&:showAppBanner=false&:display_count=no&:showVizHome=no
                    options = {
                        width: "500px",
			width: "100%",
                        height: "2000px",
			//height: "500px",
                        hideTabs: true,
                        hideToolbar: true,
			onFirstInteractive:function () {getSummaryData()}
                        //onFirstInteractive: function () {
                        //    document.getElementById('getData').disabled = false; // Enable our button
                        //}
                    };
                viz = new tableau.Viz(containerDiv, url, options);
		//viz.addEventListener("click", function() {getSummaryData()}); 
		viz.addEventListener("marksselection", getSummaryData);
		viz.addEventListener("filterchange", getSummaryData);
			//viz.addEventListener("marksselection", getSummaryData);
            }
	  
            function getSummaryData(){
                sheet = viz.getWorkbook().getActiveSheet();
                //sheet = viz.getWorkbook().getActiveSheet().getWorksheets().get("Sheet 1")[0];
		 // If the active sheet is not a dashboard, then you can just enter:
		 // viz.getWorkbook().getActiveSheet();
                options = {
                    maxRows: 0, // Max rows to return. Use 0 to return all rows
                    ignoreAliases: false,
                    ignoreSelection: false,
                    includeAllColumns: false
                };

                sheet.getSummaryDataAsync(options).then(function(t){
				var data = t.getData();
				var columns = t.getColumns();
                       table = t;
			var tgt = document.getElementById("dataTarget");
			//tgt.innerHTML = "<p>" + JSON.stringify(table.getData()) + "</p>";
			//tgt.innerHTML = "<p>" + JSON.stringify(data[0][1].value) + "</p>";
			
//var urlx = JSON.parse(JSON.stringify(data));
//document.write(urlx);
var d = document.getElementById('image_area');
//data.length refer to no. of rows
//data[0].length refers to no. of fieldset
var imgheight = "80"
//"<a href=" +JSON.stringify(data[0][1].value)">"+
//"'></a>
alert(JSON.stringify(data[0][1].value));
var urlimg1 = "<a href="+JSON.stringify(data[0][1].value) +" target='_blank'><img src=" + JSON.stringify(data[0][0].value) + " height='" + imgheight +"'></a><p><br/></p>"
//alert(urlimg1);
if (data.length == 1) {
d.innerHTML = urlimg1;

  }



for (x = 1; x < data.length ; x++) { 
    //text += "<img src=" + JSON.stringify(data[_x][1].value) + " height='" + imgheight +"'><p><br/></p>";
	if(data.length ==1){break;}
		var new_data = data[x];
	var new_data_img = new_data[0].value;
	var new_data_pdf = new_data[1].value;
	var new_stringify_img = JSON.stringify(new_data_img);
	var new_stringify_pdf = JSON.stringify(new_data_pdf);
	urlimg1 += "<a href="+new_stringify_pdf+">"+" target='_blank'><img src=" + new_stringify_img + " height='" + imgheight +"'></a><p><br/></p>";
	d.innerHTML = urlimg1;
	//alert(urlimg1);
	//alert(data.length);
		}	

            //d.innerHTML = "<img src=" + JSON.stringify(data[0][1].value) + " height='200'><p><br/><p>"+"<img src=" + JSON.stringify(data[0][2].value) + " height='200'>";
			//d.innerHTML = urlimg1 + urlimg2
		

/*
for (x = 1; x < data.length + 1; x++) { 
    //text += "<img src=" + JSON.stringify(data[_x][1].value) + " height='" + imgheight +"'><p><br/><p>";
	var new_data = data[x];
	var new_data_2 = new_data[1].value;
	var new_stringify = JSON.stringify(new_data_2);
	urlimg1 += "<img src=" + new_stringify + " height='" + imgheight +"'><p><br/><p>";
	d.innerHTML = urlimg1;
	alert(data.length);
		}
*/

                });
				
		
		
		
            }

//containerDiv.addEventListener("click", getSummaryData());

//document.window.addEventListener('click', 'getSummaryData()');




        </SCRIPT>
     <style>
	 
div.left {
    height:2000px;
    width:500px;
	//background: green;
}

div.right{
    height:100%;
	min-height:2000px;
    width:500px;
	//background: orange;
	font-size:0%;
	position:relative;
	top:68px;
	overflow: auto;
}

.container{
    height:2000px;
	width:100%;min-width:1050px;
    //width:1050px;
	//background: black;
}

.container div {
    display: inline-block;
}
	 
	 
	 
	 /*
	 .class1
			{
				width: 50%;
				float: left;
			}
			.class2
			{
				width: 50%;
				float: right;
			}
			*/
	 </style>
</HEAD>     
<BODY onload="initViz();">


<DIV class="container">
	<DIV id="vizContainer" class="left" ></DIV><!--
			<div class="page-header">
		
				<h1>getData() Basic Example</h1>
				<p>Click the "Get Data" button to get summary data for the viz.</p>
		
				<button id="getData" onmouseover="getSummaryData()" class="btn" disabled>Get Data</button>
			</div>
		--> 
			
	<!--
	<DIV id="dataTarget"></DIV>
	--> 

	<DIV id="image_area" class="right"></DIV>
</DIV>



<SCRIPT>
		//document.body.addEventListener('click', function() {getSummaryData()});
		    //containerDiv.addEventListener("click", function() {getSummaryData()});
		    //document.getElementById("vizContainer").addEventListener("click", function() {getSummaryData()});
		    //document.getElementById("vizContainer").onclick = function() {getSummaryData()};
		//alert(url1); 
		//document.window.onclick = "getSummaryData()";
	//document.write(url1);
	


	    </SCRIPT>
     </BODY></HTML>
